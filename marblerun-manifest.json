{
    "Packages": {
        "edgelessdb": {
            "SecurityVersion": 1,
            "ProductID": 16,
            "SignerID": "67d7b00741440d29922a15a9ead427b6faf1d610238ae9826da345cea4fee0fe"
        },
        "reader": {
            "SecurityVersion": 1,
            "ProductID": 17,
            "SignerID": "43361affedeb75affee9baec7e054a5e14883213e5a121b67d74a0e12e9d2b7a"
        },
        "writer": {
            "SecurityVersion": 1,
            "ProductID": 18,
            "SignerID": "43361affedeb75affee9baec7e054a5e14883213e5a121b67d74a0e12e9d2b7a"
        }
    },
    "Marbles": {
        "edgelessdb_marble": {
            "Package": "edgelessdb",
            "Parameters": {
                "Env": {
                    "EROCKSDB_MASTERKEY": "{{ hex .Secrets.edb_masterkey.Private }}",
                    "EDB_ROOT_CERT": "{{ pem .Secrets.edb_rootcert.Cert }}",
                    "EDB_ROOT_KEY": "{{ pem .Secrets.edb_rootcert.Private }}",
                    "EDG_EDB_MANIFEST_FILE": "/data/manifest.json"
                },
                "Argv": [
                    "./edb",
                    "-marble"
                ],
                "Files": {
                    "/data/manifest.json": {
                        "Encoding": "base64",
                        "NoTemplates": false,
                        "Data": "ewogICAgInNxbCI6IFsKICAgICAgICAiQ1JFQVRFIFVTRVIgcmVhZGVyIFJFUVVJUkUgSVNTVUVSICcvQ049TWFyYmxlcnVuIENvb3JkaW5hdG9yIC0gSW50ZXJtZWRpYXRlIENBJyBTVUJKRUNUICcvQ049UmVhZGVyJyIsCiAgICAgICAgIkNSRUFURSBVU0VSIHdyaXRlciBSRVFVSVJFIElTU1VFUiAnL0NOPU1hcmJsZXJ1biBDb29yZGluYXRvciAtIEludGVybWVkaWF0ZSBDQScgU1VCSkVDVCAnL0NOPVdyaXRlciciLAogICAgICAgICJDUkVBVEUgREFUQUJBU0UgdXNlcnMgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF91bmljb2RlX2NpIiwKICAgICAgICAiQ1JFQVRFIFRBQkxFIHVzZXJzLmRhdGEgKGlkIE1FRElVTUlOVCBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCwgZmlyc3RfbmFtZSBWQVJDSEFSKDY0KSBOT1QgTlVMTCwgbGFzdF9uYW1lIFZBUkNIQVIoNjQpIE5PVCBOVUxMLCBlbWFpbCBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsIFBSSU1BUlkgS0VZIChpZCkpIiwKICAgICAgICAiR1JBTlQgU0VMRUNUIE9OIHVzZXJzLmRhdGEgVE8gcmVhZGVyIiwKICAgICAgICAiR1JBTlQgSU5TRVJUIE9OIHVzZXJzLmRhdGEgVE8gd3JpdGVyIgogICAgXSwKICAgICJjYSI6ICItLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS1cbnt7IGJhc2U2NCAuTWFyYmxlcnVuLlJvb3RDQS5DZXJ0IH19XG4tLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tXG4iCn0K"
                    }
                }
            }
        },
        "reader": {
            "Package": "reader",
            "Parameters": {
                "Env": {
                    "PORT": "8008",
                    "CERT": "{{ pem .Secrets.reader_cert.Cert }}",
                    "KEY": "{{ pem .Secrets.reader_cert.Private }}"
                }
            }
        },
        "writer": {
            "Package": "writer",
            "Parameters": {
                "Env": {
                    "CERT": "{{ pem .Secrets.writer_cert.Cert }}",
                    "KEY": "{{ pem .Secrets.writer_cert.Private }}"
                }
            }
        }
    },
    "Secrets": {
        "edb_masterkey": {
            "Size": 128,
            "Shared": true,
            "Type": "symmetric-key"
        },
        "edb_rootcert": {
            "Size": 256,
            "Type": "cert-ecdsa",
            "Shared": true,
            "Cert": {
                "IsCA": true,
                "Subject": {
                    "Organization": [
                        "My EdgelessDB root"
                    ]
                }
            }
        },
        "reader_cert": {
            "Size": 256,
            "Type": "cert-ecdsa",
            "Shared": false,
            "Cert": {
                "Subject": {
                    "CommonName": "Reader"
                }
            }
        },
        "writer_cert": {
            "Size": 256,
            "Type": "cert-ecdsa",
            "Shared": false,
            "Cert": {
                "Subject": {
                    "CommonName": "Writer"
                }
            }
        }
    }
}